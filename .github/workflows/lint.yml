name: lint

on:
  push:
    branches:
      - ansible

jobs:
  shellcheck:
    runs-on: ubuntu-latest
    concurrency:
      group: ${{ github.workflow }}-${{ github.ref }}
    steps:
    - uses: actions/checkout@v2
      with:
        ref: ansible

    - uses: addnab/docker-run-action@v3
      with:
        username: ${{ secrets.DOCKER_USERNAME }}
        password: ${{ secrets.DOCKER_PASSWORD }}
        image:  koalaman/shellcheck:stable
        options: -v ${{ github.workspace }}:/work
        run: make lint
